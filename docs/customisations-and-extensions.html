<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5 Customisations and extensions | oxforddown: An Oxford University Thesis Template for R Markdown</title>
<meta name="author" content="Author Name">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="5 Customisations and extensions | oxforddown: An Oxford University Thesis Template for R Markdown">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 Customisations and extensions | oxforddown: An Oxford University Thesis Template for R Markdown">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="templates/bs4_style.css">
<link rel="stylesheet" href="templates/corrections.css">
<meta name="description" content="This chapter describes a number of additional tips and tricks as well as possible customizations to the oxforddown thesis.  5.1 Chunk caching and the _bookdown_files folder If you set cache=TRUE...">
<meta property="og:description" content="This chapter describes a number of additional tips and tricks as well as possible customizations to the oxforddown thesis.  5.1 Chunk caching and the _bookdown_files folder If you set cache=TRUE...">
<meta name="twitter:description" content="This chapter describes a number of additional tips and tricks as well as possible customizations to the oxforddown thesis.  5.1 Chunk caching and the _bookdown_files folder If you set cache=TRUE...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""><p><code>oxforddown</code>:<br>
An Oxford University Thesis<br>
Template for R Markdown</p></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="introduction.html">Introduction</a></li>
<li><a class="" href="how-to-use.html"><span class="header-section-number">1</span> How to use</a></li>
<li><a class="" href="rmd-basics.html"><span class="header-section-number">2</span> R Markdown basics</a></li>
<li><a class="" href="cites-and-refs.html"><span class="header-section-number">3</span> Citations, cross-references, and collaboration</a></li>
<li><a class="" href="tables.html"><span class="header-section-number">4</span> Tables</a></li>
<li><a class="active" href="customisations-and-extensions.html"><span class="header-section-number">5</span> Customisations and extensions</a></li>
<li><a class="" href="conclusion.html">Conclusion</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="the-first-appendix.html"><span class="header-section-number">A</span> The First Appendix</a></li>
<li><a class="" href="the-second-appendix-for-fun.html"><span class="header-section-number">B</span> The Second Appendix, for Fun</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/ulyngs/oxforddown">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="customisations-and-extensions" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Customisations and extensions<a class="anchor" aria-label="anchor" href="#customisations-and-extensions"><i class="fas fa-link"></i></a>
</h1>
<p><!-- this will include a mini table of contents--></p>
<!-- LaTeX normally does not indent the first line after a heading - however, it does so after the mini table of contents. You can manually tell it not to with \noindent -->
<p>This chapter describes a number of additional tips and tricks as well as possible customizations to the <code>oxforddown</code> thesis.</p>
<div id="chunk-caching-and-the-_bookdown_files-folder" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Chunk caching and the <strong>_bookdown_files</strong> folder<a class="anchor" aria-label="anchor" href="#chunk-caching-and-the-_bookdown_files-folder"><i class="fas fa-link"></i></a>
</h2>
<p>If you set <code>cache=TRUE</code> in a code chunk, in order to cache its results if it’s time-consuming to run see <a href="https://bookdown.org/yihui/rmarkdown-cookbook/cache.html">the R Markdown documentation</a>, then the files for the caching are stored in the **_bookdown_files** folder.</p>
<p>If you don’t use caching and you would like to just have the **_bookdown_files** folder deleted after the build process is complete, then set <code>allow_cache = FALSE</code> in <strong>index.Rmd</strong>’s call to <code>knit_thesis</code>.</p>
<p>That is, your YAML should then look like this:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="customisations-and-extensions.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">knit</span><span class="kw">:</span><span class="at"> (function(input, ...) {</span></span>
<span id="cb29-2"><a href="customisations-and-extensions.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="at">    thesis_formats &lt;- "pdf";</span></span>
<span id="cb29-3"><a href="customisations-and-extensions.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb29-4"><a href="customisations-and-extensions.html#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">    source("scripts_and_filters/knit-functions.R");</span></span>
<span id="cb29-5"><a href="customisations-and-extensions.html#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">    knit_thesis(input, thesis_formats, allow_cache = FALSE, ...)</span></span>
<span id="cb29-6"><a href="customisations-and-extensions.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">  })</span></span></code></pre></div>
</div>
<div id="front-matter" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Front matter<a class="anchor" aria-label="anchor" href="#front-matter"><i class="fas fa-link"></i></a>
</h2>
<div id="shorten-captions-shown-in-the-list-of-figures-pdf" class="section level3" number="5.2.1">
<h3>
<span class="header-section-number">5.2.1</span> Shorten captions shown in the list of figures (PDF)<a class="anchor" aria-label="anchor" href="#shorten-captions-shown-in-the-list-of-figures-pdf"><i class="fas fa-link"></i></a>
</h3>
<p>You might want your list of figures (which follows the table of contents) to have shorter (or just different) figure descriptions than the actual figure captions.</p>
<p>Do this using the chunk option <code>fig.scap</code> (‘short caption’), for example <code>{r captain-image, fig.cap="A very long and descriptive (and potentially boring) caption that doesn't fit in the list of figures, but helps the reader understand what the figure communicates.", fig.scap="A concise description for the list of figures"</code></p>
</div>
<div id="shorten-captions-shown-in-the-list-of-tables-pdf" class="section level3" number="5.2.2">
<h3>
<span class="header-section-number">5.2.2</span> Shorten captions shown in the list of tables (PDF)<a class="anchor" aria-label="anchor" href="#shorten-captions-shown-in-the-list-of-tables-pdf"><i class="fas fa-link"></i></a>
</h3>
<p>You might want your list of tables (which follows the list of figures in your thesis front matter) to have shorter (or just different) table descriptions than the actual table captions.</p>
<p>If you are using <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">knitr::kable</a></code> to generate a table, you can do this with the argument <code>caption.short</code>, e.g.:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">mtcars</span>,</span>
<span>              caption <span class="op">=</span> <span class="st">"A very long and descriptive (and potentially</span></span>
<span><span class="st">              boring) caption that doesn't fit in the list of figures,</span></span>
<span><span class="st">              but helps the reader understand what the figure </span></span>
<span><span class="st">              communicates."</span>,</span>
<span>              caption.short <span class="op">=</span> <span class="st">"A concise description for the list of tables"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="shorten-running-header-pdf" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Shorten running header (PDF)<a class="anchor" aria-label="anchor" href="#shorten-running-header-pdf"><i class="fas fa-link"></i></a>
</h2>
<p>You might want a chapter’s running header (i.e. the header showing the title of the current chapter at the top of page) to be shorter (or just different) to the actual chapter title.</p>
<p>Do this by adding the latex command <code>\chaptermark{My shorter version}</code> after your chapter title.</p>
<p>For example, chapter <a href="cites-and-refs.html#cites-and-refs">3</a>‘s running header is simply ’Cites and cross-refs’, because it begins like this:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb31-1"><a href="customisations-and-extensions.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Citations, cross-references, and collaboration {#cites-and-refs} </span></span>
<span id="cb31-2"><a href="customisations-and-extensions.html#cb31-2" aria-hidden="true" tabindex="-1"></a>\chaptermark{Cites and cross-refs}</span></code></pre></div>
</div>
<div id="unnumbered-chapters" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Unnumbered chapters<a class="anchor" aria-label="anchor" href="#unnumbered-chapters"><i class="fas fa-link"></i></a>
</h2>
<p>To make chapters unnumbered (normally only relevant to the Introduction and/or the Conclusion), follow the chapter header with <code>{-}</code>, e.g. <code># Introduction {-}</code>.</p>
<p>When you do this, you must also follow the heading with these two latex commands:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb32-1"><a href="customisations-and-extensions.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\adjustmtc</span></span>
<span id="cb32-2"><a href="customisations-and-extensions.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">\markboth</span>{The Name of Your Unnumbered Chapter}{}</span></code></pre></div>
<p>Otherwise the chapter’s mini table of contents and the running header will show the previous chapter.</p>
</div>
<div id="beginning-chapters-with-quotes-pdf" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> Beginning chapters with quotes (PDF)<a class="anchor" aria-label="anchor" href="#beginning-chapters-with-quotes-pdf"><i class="fas fa-link"></i></a>
</h2>
<p>The OxThesis LaTeX template lets you inject some wittiness into your thesis by including a block of type <code>savequote</code> at the beginning of chapters.
To do this, use the syntax <code>```{block type='savequote'}</code>.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;For more on custom block types, see the relevant section in &lt;a href="https://bookdown.org/yihui/bookdown/custom-blocks.html"&gt;&lt;em&gt;Authoring Books with R Markdown&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;'><sup>4</sup></a></p>
<p>Add the reference for the quote with the chunk option <code>quote_author="my author name"</code>.
You will also want to add the chunk option <code>include=knitr::is_latex_output()</code> so that quotes are only included in PDF output.</p>
<p>It’s not possible to use markdown syntax inside chunk options, so if you want to e.g. italicise a book name in the reference use a <a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#text-references">‘text reference’</a>: Create a named piece of text with ‘(ref:label-name) My text’, then point to this in the chunk option with <code>quote_author='(ref:label-name)'</code>.</p>
</div>
<div id="highlighting-corrections-html-pdf" class="section level2" number="5.6">
<h2>
<span class="header-section-number">5.6</span> Highlighting corrections (HTML &amp; PDF)<a class="anchor" aria-label="anchor" href="#highlighting-corrections-html-pdf"><i class="fas fa-link"></i></a>
</h2>
<p>For when it comes time to do corrections, you may want to highlight changes made when you submit a post-viva, corrected copy to your examiners so they can quickly verify you’ve completed the task.
You can do so like this:</p>
<div id="short-inline-corrections" class="section level3" number="5.6.1">
<h3>
<span class="header-section-number">5.6.1</span> Short, inline corrections<a class="anchor" aria-label="anchor" href="#short-inline-corrections"><i class="fas fa-link"></i></a>
</h3>
<p>Highlight <strong>short, inline corrections</strong> by doing <code>[like this]{.correction}</code> — the text between the square brackets will then <span class="correction">be highlighted in blue</span> in the output.</p>
<p>Note that pandoc might get confused by citations and cross-references inside inline corrections.
In particular, it might get confused by <code>"[what @Shea2014 said]{.correction}"</code> which becomes <span class="correction">what <span class="citation">Shea et al. (<a href="references.html#ref-Shea2014" role="doc-biblioref">2014</a>)</span> said</span>
In such cases, you can use LaTeX syntax directly.
The correction highlighting uses the <a href="https://ctan.org/pkg/soul">soul</a> package, so you can do like this:</p>
<ul>
<li>If using biblatex for references, use <code>"\hl{what \textcite{Shea2014} said}</code>
</li>
<li>If using natbib for references, use <code>"\hl{what \cite{Shea2014} said}</code>
</li>
</ul>
<p>Using raw LaTeX has the drawback of corrections then not showing up in HTML output at all, but you might only care about correction highlighting in the PDF for your examiners anyway!</p>
</div>
<div id="blocks-of-added-or-changed-material" class="section level3" number="5.6.2">
<h3>
<span class="header-section-number">5.6.2</span> Blocks of added or changed material<a class="anchor" aria-label="anchor" href="#blocks-of-added-or-changed-material"><i class="fas fa-link"></i></a>
</h3>
<p>Highlight entire <strong>blocks of added or changed material</strong> by putting them in a block of type <code>correction</code>, using the syntax <code>```{block type='correction'}</code>.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;In the &lt;strong&gt;.tex&lt;/strong&gt; file for PDF output, this will put the content between &lt;code&gt;\begin{correction}&lt;/code&gt; and &lt;code&gt;\end{correction}&lt;/code&gt;; in gitbook output it will be put between &lt;code&gt;&amp;lt;div class="correction"&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;/div&amp;gt;&lt;/code&gt;.&lt;/p&gt;'><sup>5</sup></a>
Like so:</p>
<div class="correction">
<p>
For larger chunks, like this paragraph or indeed entire figures, you
can use the <code>correction</code> block type. This environment
<strong>highlights paragraph-sized and larger blocks</strong> with the
same blue colour.
</p>
</div>
<p><em>Note that correction blocks cannot be included in word output.</em></p>
</div>
<div id="stopping-corrections-from-being-highlighted" class="section level3" number="5.6.3">
<h3>
<span class="header-section-number">5.6.3</span> Stopping corrections from being highlighted<a class="anchor" aria-label="anchor" href="#stopping-corrections-from-being-highlighted"><i class="fas fa-link"></i></a>
</h3>
<p>To turn off correction highlighting, go to the YAML header of <strong>index.Rmd</strong>, then:</p>
<ul>
<li>PDF output: set <code>corrections: false</code><br>
</li>
<li>HTML output: remove or comment out <code>- templates/corrections.css</code>
</li>
</ul>
</div>
</div>
<div id="apply-custom-font-color-and-highlighting-to-text-html-pdf" class="section level2" number="5.7">
<h2>
<span class="header-section-number">5.7</span> Apply custom font color and highlighting to text (HTML &amp; PDF)<a class="anchor" aria-label="anchor" href="#apply-custom-font-color-and-highlighting-to-text-html-pdf"><i class="fas fa-link"></i></a>
</h2>
<p>The lua filter that adds the functionality to highlight corrections adds two more tricks:
you can apply your own choice of colour to highlight text, or change the font color.
The syntax is as follows:</p>
<blockquote>
<p>Here’s <code>[some text in pink highlighting]{highlight="pink"}</code><br>
Becomes: Here’s <span style="background-color: pink;">some text in pink highlighting</span>.</p>
</blockquote>
<blockquote>
<p><code>[Here's some text with blue font]{color="blue"}</code><br>
Becomes: <span style=" color: blue;">Here’s some text with blue font</span></p>
</blockquote>
<blockquote>
<p>Finally — never, ever actually do this – <code>[here's some text with black highlighting and yellow font]{highlight="black" color="yellow"}</code><br>
Becomes: <span style="background-color: black; color: yellow;">here’s some text with black highlighting and yellow font</span></p>
</blockquote>
<p>The file <strong>scripts_and_filters/colour_and_highlight.lua</strong> implements this, if you want to fiddle around with it.
It works with both PDF and HTML output.</p>
</div>
<div id="adding-a-second-abstract-pdf" class="section level2" number="5.8">
<h2>
<span class="header-section-number">5.8</span> Adding a second abstract (PDF)<a class="anchor" aria-label="anchor" href="#adding-a-second-abstract-pdf"><i class="fas fa-link"></i></a>
</h2>
<p>You may need two abstracts in your thesis, if you e.g. need both an abstract in English and some other language.</p>
<p>You can add a second abstract in <strong>index.Rmd</strong> like so:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb33-1"><a href="customisations-and-extensions.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">abstract-second-heading</span><span class="kw">:</span><span class="at"> </span><span class="st">"Resumé"</span></span>
<span id="cb33-2"><a href="customisations-and-extensions.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abstract-second</span><span class="kw">:</span><span class="at"> </span><span class="st">"This is the second abstract, for example in beautiful French."</span><span class="at"> </span></span></code></pre></div>
</div>
<div id="embed-pdf" class="section level2" number="5.9">
<h2>
<span class="header-section-number">5.9</span> Including another paper in your thesis - embed a PDF document<a class="anchor" aria-label="anchor" href="#embed-pdf"><i class="fas fa-link"></i></a>
</h2>
<p>You may want to embed existing PDF documents into the thesis, for example if your department allows a ‘portfolio’ style thesis and you need to include an existing typeset publication as a chapter.</p>
<p>In gitbook output, you can simply use <code><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">knitr::include_graphics</a></code> and it should include a scrollable (and downloadable) PDF.
You will probably want to set the chunk options <code>out.width='100%'</code> and <code>out.height='1000px'</code>:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"figures/sample-content/pdf_embed_example/Lyngs2020_FB.pdf"</span><span class="op">)</span></span></code></pre></div>
<embed src="figures/sample-content/pdf_embed_example/Lyngs2020_FB.pdf" width="100%" height="1000px" type="application/pdf"></embed><p><br></p>
<p>In LaTeX output, however, this approach can cause odd behaviour.
Therefore, when you build your thesis to PDF, split the PDF into an alphanumerically sorted sequence of <strong>single-page</strong> PDF files (you can do this automatically with the package <code>pdftools</code>). You can then use the appropriate LaTeX command to insert them, as shown below (for brevity, in the <code>oxforddown</code> PDF sample content we’re only including two pages).
<em>Note that the chunk option <code>results='asis'</code> must be set.</em>
You may also want to remove margins from the PDF files, which you can do with Adobe Acrobat (paid version) and likely other software.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages(pdftools)</span></span>
<span><span class="co"># split PDF into pages stored in figures/sample-content/pdf_embed_example/split/</span></span>
<span><span class="co"># pdftools::pdf_split("figures/sample-content/pdf_embed_example/Lyngs2020_FB.pdf",</span></span>
<span><span class="co">#        output = "figures/sample-content/pdf_embed_example/split/")</span></span>
<span></span>
<span><span class="co"># grab the pages</span></span>
<span><span class="va">pages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="st">"figures/sample-content/pdf_embed_example/split"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set how wide you want the inserted PDFs to be: </span></span>
<span><span class="co"># 1.0 is 100 per cent of the oxforddown PDF page width;</span></span>
<span><span class="co"># you may want to make it a bit bigger</span></span>
<span><span class="va">pdf_width</span> <span class="op">&lt;-</span> <span class="fl">1.2</span></span>
<span></span>
<span><span class="co"># for each PDF page, insert it nicely and</span></span>
<span><span class="co"># end with a page break</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">"\\newpage \\begin{center} \\makebox[\\linewidth][c]{\\includegraphics[width="</span>, <span class="va">pdf_width</span>, <span class="st">"\\linewidth]{"</span>, <span class="va">pages</span>, <span class="st">"}} \\end{center}"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="embed-rmd" class="section level2" number="5.10">
<h2>
<span class="header-section-number">5.10</span> Including another paper in your thesis - R Markdown child document<a class="anchor" aria-label="anchor" href="#embed-rmd"><i class="fas fa-link"></i></a>
</h2>
<p>Sometimes you want to include another paper you are currently writing as a chapter in your thesis.
Above <a href="customisations-and-extensions.html#embed-pdf">5.9</a>, we described the simplest way to do this: include the other paper as a pdf.
However, in some cases you instead want to include the R Markdown source from this paper, and have it compiled within your thesis.
This is a little bit more tricky, because you need to keep careful track of your file paths, but it is possible by <a href="https://bookdown.org/yihui/rmarkdown-cookbook/child-document.html">including the paper as a child document</a>.
There are four main steps:</p>
<ol style="list-style-type: decimal">
<li>Include the paper as a child document</li>
<li>Make file paths compatible with knitting the article on its own, as well as when it’s include in your thesis</li>
<li>Make header levels correct</li>
<li>Make figure widths correct</li>
</ol>
<div id="an-example-paper-in-another-folder" class="section level3" number="5.10.1">
<h3>
<span class="header-section-number">5.10.1</span> An example paper in another folder<a class="anchor" aria-label="anchor" href="#an-example-paper-in-another-folder"><i class="fas fa-link"></i></a>
</h3>
<p>Take this simple example (files for this are in <a href="https://github.com/ulyngs/oxforddown-external-article">this GitHub repository</a>):</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb36-1"><a href="customisations-and-extensions.html#cb36-1" aria-hidden="true" tabindex="-1"></a>|--paper_to_include</span>
<span id="cb36-2"><a href="customisations-and-extensions.html#cb36-2" aria-hidden="true" tabindex="-1"></a>|  |--my_paper.Rmd</span>
<span id="cb36-3"><a href="customisations-and-extensions.html#cb36-3" aria-hidden="true" tabindex="-1"></a>|  |--data</span>
<span id="cb36-4"><a href="customisations-and-extensions.html#cb36-4" aria-hidden="true" tabindex="-1"></a>|  |  |--cat_salt.csv</span>
<span id="cb36-5"><a href="customisations-and-extensions.html#cb36-5" aria-hidden="true" tabindex="-1"></a>|  |--figures</span>
<span id="cb36-6"><a href="customisations-and-extensions.html#cb36-6" aria-hidden="true" tabindex="-1"></a>|  |  |--cat.jpg</span>
<span id="cb36-7"><a href="customisations-and-extensions.html#cb36-7" aria-hidden="true" tabindex="-1"></a>|</span>
<span id="cb36-8"><a href="customisations-and-extensions.html#cb36-8" aria-hidden="true" tabindex="-1"></a>|--thesis</span></code></pre></div>
<p>As the chart suggests, you have another folder, <strong>paper_to_include/</strong> living in the same containing folder as your thesis folder.
In the <strong>paper_to_include</strong> folder, the file <strong>my_paper.Rmd</strong> is where you write the paper.
In <strong>my_paper.Rmd</strong>, you read in a CSV file found in the subfolder <strong>data/cats.csv</strong>, and also an image from the subfolder <strong>figures/cat.jpg</strong>.</p>
</div>
<div id="step-1-include-paper-as-a-child-document" class="section level3" number="5.10.2">
<h3>
<span class="header-section-number">5.10.2</span> Step 1: Include paper as a child document<a class="anchor" aria-label="anchor" href="#step-1-include-paper-as-a-child-document"><i class="fas fa-link"></i></a>
</h3>
<p>In your thesis folder, create an Rmd file for the chapter where you want to include another paper.
Add one or more code chunks that include R Markdown files from that paper as child documents:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb37-1"><a href="customisations-and-extensions.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Including an external chapter </span></span>
<span id="cb37-2"><a href="customisations-and-extensions.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="customisations-and-extensions.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="in">```{r child = "../paper_to_include/my_paper.Rmd"}</span></span>
<span id="cb37-4"><a href="customisations-and-extensions.html#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</div>
<div id="step-2-make-file-paths-compatible" class="section level3" number="5.10.3">
<h3>
<span class="header-section-number">5.10.3</span> Step 2: Make file paths compatible<a class="anchor" aria-label="anchor" href="#step-2-make-file-paths-compatible"><i class="fas fa-link"></i></a>
</h3>
<p>Use <a href="https://rmarkdown.rstudio.com/lesson-6.html">parameters</a> to adjust the file path of images based on values you set in the YAML header of an R Markdown file.
In <strong>my_paper.Rmd</strong>, create a parameter called <code>other_path</code> and set it to an empty string:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb38-1"><a href="customisations-and-extensions.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb38-2"><a href="customisations-and-extensions.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"A fabulous article in a different folder"</span></span>
<span id="cb38-3"><a href="customisations-and-extensions.html#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb38-4"><a href="customisations-and-extensions.html#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">other_path</span><span class="kw">:</span><span class="at"> </span><span class="st">""</span></span>
<span id="cb38-5"><a href="customisations-and-extensions.html#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>In <strong>my_paper.Rmd</strong>, put this at the start of the filepath when you read in data or include images:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cat_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">other_path</span>, <span class="st">"data/cats.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">other_path</span>, <span class="st">"figures/cat.jpg"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, in your thesis folder’s <strong>index.Rmd</strong> file, also create the parameter <code>other_path</code>.
But here, set it to where the <strong>paper_to_include/</strong> folder is relative to your thesis folder:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb40-1"><a href="customisations-and-extensions.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb40-2"><a href="customisations-and-extensions.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">other_path</span><span class="kw">:</span><span class="at"> </span><span class="st">"../paper_to_include/"</span></span></code></pre></div>
<div id="note-on-html-output" class="section level4" number="5.10.3.1">
<h4>
<span class="header-section-number">5.10.3.1</span> Note on HTML output<a class="anchor" aria-label="anchor" href="#note-on-html-output"><i class="fas fa-link"></i></a>
</h4>
<p>Note that if you want to host an HTML version on your thesis online, you will need to include graphics in the content that you host online - the internet obviously won’t be able to see filepaths that are just referring to stuff in another folder on your computer!</p>
</div>
</div>
<div id="step-3-make-sure-header-levels-are-correct" class="section level3" number="5.10.4">
<h3>
<span class="header-section-number">5.10.4</span> Step 3: Make sure header levels are correct<a class="anchor" aria-label="anchor" href="#step-3-make-sure-header-levels-are-correct"><i class="fas fa-link"></i></a>
</h3>
<p>Unless the paper you want to include is also written as a book, your header levels are probably going to be off.
That is, the level 1 headers (# Some header) you use for main sections in the other paper turns into chaper titles when included in your thesis.</p>
<p>To avoid this, first <em>increment all heading levels by one in <strong>paper_to_include/my_paper.Rmd</strong></em> (# Some header -&gt; ## Some header).
Then in <strong>paper_to_include/</strong> create a <a href="https://bookdown.org/yihui/rmarkdown-cookbook/lua-filters.html#lua-filters">lua filter</a> that decrements header levels by one: Create a text file, save it as <strong>reduce_header_level.lua</strong>, and give it the content below.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb41-1"><a href="customisations-and-extensions.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Header<span class="op">(</span>el<span class="op">)</span></span>
<span id="cb41-2"><a href="customisations-and-extensions.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(</span>el<span class="op">.</span>level <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb41-3"><a href="customisations-and-extensions.html#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">error</span><span class="op">(</span><span class="st">"I don't know how to decrease the level of h1"</span><span class="op">)</span></span>
<span id="cb41-4"><a href="customisations-and-extensions.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb41-5"><a href="customisations-and-extensions.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  el<span class="op">.</span>level <span class="op">=</span> el<span class="op">.</span>level <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb41-6"><a href="customisations-and-extensions.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> el</span>
<span id="cb41-7"><a href="customisations-and-extensions.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p>In the YAML header of <strong>paper_to_include/my_paper.Rmd</strong>, use this filter:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb42-1"><a href="customisations-and-extensions.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb42-2"><a href="customisations-and-extensions.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"A fabulous article in a different folder"</span></span>
<span id="cb42-3"><a href="customisations-and-extensions.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb42-4"><a href="customisations-and-extensions.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">other_path</span><span class="kw">:</span><span class="at"> </span><span class="st">""</span></span>
<span id="cb42-5"><a href="customisations-and-extensions.html#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb42-6"><a href="customisations-and-extensions.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb42-7"><a href="customisations-and-extensions.html#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">pandoc_args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"--lua-filter=reduce_header_level.lua"</span><span class="kw">]</span></span>
<span id="cb42-8"><a href="customisations-and-extensions.html#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>Now, your header levels will be correct both when you knit the paper on its own and when its included in your thesis.</p>
<p>NOTE: There might be no need to use a lua filter to shift heading - it seems you could simply use <code>pandoc_args: ["--shift-heading-level-by=-1"]</code> (see <a href="https://pandoc.org/MANUAL.html#reader-options" class="uri">https://pandoc.org/MANUAL.html#reader-options</a>)</p>
</div>
<div id="step-4.-make-sure-figure-widths-are-correct" class="section level3" number="5.10.5">
<h3>
<span class="header-section-number">5.10.5</span> Step 4. Make sure figure widths are correct<a class="anchor" aria-label="anchor" href="#step-4.-make-sure-figure-widths-are-correct"><i class="fas fa-link"></i></a>
</h3>
<p>It might be that your figure widths when knitting your paper on its own, and when including it in your thesis, need to be different.
You can again use parameters to set figure widths.</p>
<p>Imagine you want figure width to be 80% of the page width when knitting your paper on its own, but 100% in your thesis.
In <strong>paper_to_include/my_paper.Rmd</strong>, first add a parameter we could call <code>out_width</code> and set it to the string “80%”:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb43-1"><a href="customisations-and-extensions.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb43-2"><a href="customisations-and-extensions.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"A fabulous article in a different folder"</span></span>
<span id="cb43-3"><a href="customisations-and-extensions.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb43-4"><a href="customisations-and-extensions.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">other_path</span><span class="kw">:</span><span class="at"> </span><span class="st">""</span></span>
<span id="cb43-5"><a href="customisations-and-extensions.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">out_width</span><span class="kw">:</span><span class="at"> </span><span class="st">"80%"</span></span>
<span id="cb43-6"><a href="customisations-and-extensions.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb43-7"><a href="customisations-and-extensions.html#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb43-8"><a href="customisations-and-extensions.html#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">pandoc_args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"--lua-filter=reduce_header_level.lua"</span><span class="kw">]</span></span>
<span id="cb43-9"><a href="customisations-and-extensions.html#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>Then, make sure use that parameter to set the output width when you include figures in <strong>paper_to_include/my_paper.Rmd</strong>:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb44-1"><a href="customisations-and-extensions.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, out.width=params$out_width, fig.cap="A very funny cat"}</span></span>
<span id="cb44-2"><a href="customisations-and-extensions.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="in">include_graphics(str_c(params$other_path, "figures/cat.jpg"))</span></span>
<span id="cb44-3"><a href="customisations-and-extensions.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>Finally, create the parameter <code>out_width</code> in your thesis’ <strong>index.Rmd</strong> file:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb45-1"><a href="customisations-and-extensions.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb45-2"><a href="customisations-and-extensions.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">other_path</span><span class="kw">:</span><span class="at"> </span><span class="st">"../paper_to_include/"</span></span>
<span id="cb45-3"><a href="customisations-and-extensions.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">out_width</span><span class="kw">:</span><span class="at"> </span><span class="st">"80%"</span></span></code></pre></div>
<p>Now, the output width of your figure will be 80% when knitting your paper on its own, and 100% when knitting it as child document of your thesis.</p>
</div>
</div>
<div id="customising-citations" class="section level2" number="5.11">
<h2>
<span class="header-section-number">5.11</span> Customizing citations and referencing<a class="anchor" aria-label="anchor" href="#customising-citations"><i class="fas fa-link"></i></a>
</h2>
<div id="using-a-.csl-file-with-pandoc" class="section level3" number="5.11.1">
<h3>
<span class="header-section-number">5.11.1</span> Using a .csl file with pandoc<a class="anchor" aria-label="anchor" href="#using-a-.csl-file-with-pandoc"><i class="fas fa-link"></i></a>
</h3>
<p>See section <a href="cites-and-refs.html#citation-appearance">3.1.1</a>.</p>
<p>The only drawbacks to letting pandoc handle citations is that (i) it does not support chapter bibliographies, (ii) if you’re a LaTeX veteran, you might be more comfortable with <code>biblatex</code> or <code>natbib</code>.</p>
</div>
<div id="biblatex-custom" class="section level3" number="5.11.2">
<h3>
<span class="header-section-number">5.11.2</span> Using <code>biblatex</code><a class="anchor" aria-label="anchor" href="#biblatex-custom"><i class="fas fa-link"></i></a>
</h3>
<p>To use <a href="https://www.overleaf.com/learn/latex/Bibliography_management_with_biblatex">biblatex</a> to handle citations, first uncomment this in <strong>index.Rmd</strong>, YAML header:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb46-1"><a href="customisations-and-extensions.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="an">use-biblatex:</span><span class="co"> true</span></span>
<span id="cb46-2"><a href="customisations-and-extensions.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="an">bib-latex-options:</span><span class="co"> "style=authoryear, sorting=nyt, backend=biber, maxcitenames=2, useprefix, doi=true, isbn=false, uniquename=false"</span></span></code></pre></div>
<p>Then tell R Markdown to use <code>biblatex</code> when inserting citations, by setting <code>citation_package: biblatex</code>:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb47-1"><a href="customisations-and-extensions.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb47-2"><a href="customisations-and-extensions.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  bookdown::pdf_book:</span>
<span id="cb47-3"><a href="customisations-and-extensions.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    citation_package: biblatex</span></code></pre></div>
<p>To customise the appearance of citations, change <code>bib-latex-options</code>. For example, to get <strong>numerical citations</strong>, with references in order of their appearance in the text, set it to</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb48-1"><a href="customisations-and-extensions.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="an">bib-latex-options:</span><span class="co"> "style=numeric-comp, sorting=none, backend=biber, maxcitenames=2, useprefix, doi=true, isbn=false, uniquename=false"</span></span></code></pre></div>
<div id="adding-chapter-bibliographies" class="section level4" number="5.11.2.1">
<h4>
<span class="header-section-number">5.11.2.1</span> Adding chapter bibliographies<a class="anchor" aria-label="anchor" href="#adding-chapter-bibliographies"><i class="fas fa-link"></i></a>
</h4>
<p>If you would like chapter bibliographies, first add “refsection=chapter” to the biblatex options, for example like this:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb49-1"><a href="customisations-and-extensions.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="an">bib-latex-options:</span><span class="co"> "refsection=chapter, style=authoryear, sorting=nyt, backend=biber, maxcitenames=2, useprefix, doi=true, isbn=false, uniquename=false"</span></span></code></pre></div>
<p>Second, set the parameter <code>insertHeadingInPDF: false</code> in <strong>index.Rmd</strong>, to suppress the inclusion of a ‘References’ heading at the end of the thesis.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb50-1"><a href="customisations-and-extensions.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="an">params:</span></span>
<span id="cb50-2"><a href="customisations-and-extensions.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  insertHeadingInPDF: false</span></code></pre></div>
<p>Finally insert this line at the end of each chapter, to print the bibliographies there:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb51-1"><a href="customisations-and-extensions.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\printbibliography</span>[segment=<span class="fu">\therefsection</span>,heading=subbibliography]</span></code></pre></div>
</div>
</div>
<div id="natbib-custom" class="section level3" number="5.11.3">
<h3>
<span class="header-section-number">5.11.3</span> Using <code>natbib</code><a class="anchor" aria-label="anchor" href="#natbib-custom"><i class="fas fa-link"></i></a>
</h3>
<p>To use <a href="https://www.overleaf.com/learn/latex/Bibliography_management_with_natbib">natbib</a> to handle citations, first uncomment this in <strong>index.Rmd</strong>, YAML header:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb52-1"><a href="customisations-and-extensions.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="an">use-natbib:</span><span class="co"> true</span></span>
<span id="cb52-2"><a href="customisations-and-extensions.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="an">natbib-citation-style:</span><span class="co"> authoryear #for science, you might want numbers,square</span></span>
<span id="cb52-3"><a href="customisations-and-extensions.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="an">natbib-bibliography-style:</span><span class="co"> templates/ACM-Reference-Format.bst #e.g. "plainnat", unsrtnat, or path to a .bst file</span></span></code></pre></div>
<p>Then tell R Markdown to use <code>natbib</code> when inserting citations, by setting <code>citation_package: natbib</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb53-1"><a href="customisations-and-extensions.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb53-2"><a href="customisations-and-extensions.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  bookdown::pdf_book:</span>
<span id="cb53-3"><a href="customisations-and-extensions.html#cb53-3" aria-hidden="true" tabindex="-1"></a>    citation_package: natbib</span></code></pre></div>
<p>To customise the appearance of citations, change what <strong>.bst</strong> file you point to in <code>natbib-bibliography-style</code>.</p>
</div>
</div>
<div id="customizing-the-page-headers-and-footers-pdf" class="section level2" number="5.12">
<h2>
<span class="header-section-number">5.12</span> Customizing the page headers and footers (PDF)<a class="anchor" aria-label="anchor" href="#customizing-the-page-headers-and-footers-pdf"><i class="fas fa-link"></i></a>
</h2>
<p>This can now be done directly in <strong>index.Rmd</strong>’s YAML header.
If you are a LaTeX expert and need further customisation that what’s currently provided, you can tweak the relevant sections of <strong>templates/template.tex</strong> - the relevant code is beneath the line that begins <code>\usepackage{fancyhdr}</code>.</p>
</div>
<div id="diving-in-to-the-oxthesis-latex-template-pdf" class="section level2" number="5.13">
<h2>
<span class="header-section-number">5.13</span> Diving in to the OxThesis LaTeX template (PDF)<a class="anchor" aria-label="anchor" href="#diving-in-to-the-oxthesis-latex-template-pdf"><i class="fas fa-link"></i></a>
</h2>
<p>For LaTeX minded people, you can read through <strong>templates/template.tex</strong> to see which additional customisation options are available as well as <strong>templates/ociamthesis.cls</strong> which supplies the base class.
For example, <strong>template.tex</strong> provides an option for master’s degree submissions, which changes identifying information to candidate number and includes a word count.
At the time of writing, you must set this directly in <strong>template.tex</strong> rather than from the YAML header in <strong>index.Rmd</strong>.</p>
</div>
<div id="customising-to-a-different-university" class="section level2" number="5.14">
<h2>
<span class="header-section-number">5.14</span> Customising to a different university<a class="anchor" aria-label="anchor" href="#customising-to-a-different-university"><i class="fas fa-link"></i></a>
</h2>
<div id="the-minimal-route" class="section level3" number="5.14.1">
<h3>
<span class="header-section-number">5.14.1</span> The minimal route<a class="anchor" aria-label="anchor" href="#the-minimal-route"><i class="fas fa-link"></i></a>
</h3>
<p>If the front matter in the OxThesis LaTeX template is suitable to your university, customising <code>oxforddown</code> to your needs could be as simple as putting the name of your institution and the path to your university’s logo in <strong>index.Rmd</strong>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb54-1"><a href="customisations-and-extensions.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">university</span><span class="kw">:</span><span class="at"> University of You</span></span>
<span id="cb54-2"><a href="customisations-and-extensions.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">university-logo</span><span class="kw">:</span><span class="at"> figures/your-logo-here.pdf</span></span></code></pre></div>
</div>
<div id="replacing-the-entire-title-page-with-your-required-content" class="section level3" number="5.14.2">
<h3>
<span class="header-section-number">5.14.2</span> Replacing the entire title page with your required content<a class="anchor" aria-label="anchor" href="#replacing-the-entire-title-page-with-your-required-content"><i class="fas fa-link"></i></a>
</h3>
<p>If you have a <strong>.tex</strong> file with some required front matter from your university that you want to replace the OxThesis template’s title page altogether, you can provide a filepath to this file in <strong>index.Rmd</strong>.
<code>oxforddown</code>’s sample content includes and example of this — if you use the YAML below, your front matter will look like this:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb55-1"><a href="customisations-and-extensions.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">alternative-title-page</span><span class="kw">:</span><span class="at"> front-and-back-matter/alt-title-page-example.tex</span></span></code></pre></div>
<embed src="figures/sample-content/alt_frontmatter_example/alt-frontmatter-example.pdf" width="100%" height="1000px" type="application/pdf"></embed><p>
</p>


</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="tables.html"><span class="header-section-number">4</span> Tables</a></div>
<div class="next"><a href="conclusion.html">Conclusion</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#customisations-and-extensions"><span class="header-section-number">5</span> Customisations and extensions</a></li>
<li><a class="nav-link" href="#chunk-caching-and-the-_bookdown_files-folder"><span class="header-section-number">5.1</span> Chunk caching and the _bookdown_files folder</a></li>
<li>
<a class="nav-link" href="#front-matter"><span class="header-section-number">5.2</span> Front matter</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#shorten-captions-shown-in-the-list-of-figures-pdf"><span class="header-section-number">5.2.1</span> Shorten captions shown in the list of figures (PDF)</a></li>
<li><a class="nav-link" href="#shorten-captions-shown-in-the-list-of-tables-pdf"><span class="header-section-number">5.2.2</span> Shorten captions shown in the list of tables (PDF)</a></li>
</ul>
</li>
<li><a class="nav-link" href="#shorten-running-header-pdf"><span class="header-section-number">5.3</span> Shorten running header (PDF)</a></li>
<li><a class="nav-link" href="#unnumbered-chapters"><span class="header-section-number">5.4</span> Unnumbered chapters</a></li>
<li><a class="nav-link" href="#beginning-chapters-with-quotes-pdf"><span class="header-section-number">5.5</span> Beginning chapters with quotes (PDF)</a></li>
<li>
<a class="nav-link" href="#highlighting-corrections-html-pdf"><span class="header-section-number">5.6</span> Highlighting corrections (HTML &amp; PDF)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#short-inline-corrections"><span class="header-section-number">5.6.1</span> Short, inline corrections</a></li>
<li><a class="nav-link" href="#blocks-of-added-or-changed-material"><span class="header-section-number">5.6.2</span> Blocks of added or changed material</a></li>
<li><a class="nav-link" href="#stopping-corrections-from-being-highlighted"><span class="header-section-number">5.6.3</span> Stopping corrections from being highlighted</a></li>
</ul>
</li>
<li><a class="nav-link" href="#apply-custom-font-color-and-highlighting-to-text-html-pdf"><span class="header-section-number">5.7</span> Apply custom font color and highlighting to text (HTML &amp; PDF)</a></li>
<li><a class="nav-link" href="#adding-a-second-abstract-pdf"><span class="header-section-number">5.8</span> Adding a second abstract (PDF)</a></li>
<li><a class="nav-link" href="#embed-pdf"><span class="header-section-number">5.9</span> Including another paper in your thesis - embed a PDF document</a></li>
<li>
<a class="nav-link" href="#embed-rmd"><span class="header-section-number">5.10</span> Including another paper in your thesis - R Markdown child document</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#an-example-paper-in-another-folder"><span class="header-section-number">5.10.1</span> An example paper in another folder</a></li>
<li><a class="nav-link" href="#step-1-include-paper-as-a-child-document"><span class="header-section-number">5.10.2</span> Step 1: Include paper as a child document</a></li>
<li><a class="nav-link" href="#step-2-make-file-paths-compatible"><span class="header-section-number">5.10.3</span> Step 2: Make file paths compatible</a></li>
<li><a class="nav-link" href="#step-3-make-sure-header-levels-are-correct"><span class="header-section-number">5.10.4</span> Step 3: Make sure header levels are correct</a></li>
<li><a class="nav-link" href="#step-4.-make-sure-figure-widths-are-correct"><span class="header-section-number">5.10.5</span> Step 4. Make sure figure widths are correct</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#customising-citations"><span class="header-section-number">5.11</span> Customizing citations and referencing</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#using-a-.csl-file-with-pandoc"><span class="header-section-number">5.11.1</span> Using a .csl file with pandoc</a></li>
<li><a class="nav-link" href="#biblatex-custom"><span class="header-section-number">5.11.2</span> Using biblatex</a></li>
<li><a class="nav-link" href="#natbib-custom"><span class="header-section-number">5.11.3</span> Using natbib</a></li>
</ul>
</li>
<li><a class="nav-link" href="#customizing-the-page-headers-and-footers-pdf"><span class="header-section-number">5.12</span> Customizing the page headers and footers (PDF)</a></li>
<li><a class="nav-link" href="#diving-in-to-the-oxthesis-latex-template-pdf"><span class="header-section-number">5.13</span> Diving in to the OxThesis LaTeX template (PDF)</a></li>
<li>
<a class="nav-link" href="#customising-to-a-different-university"><span class="header-section-number">5.14</span> Customising to a different university</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#the-minimal-route"><span class="header-section-number">5.14.1</span> The minimal route</a></li>
<li><a class="nav-link" href="#replacing-the-entire-title-page-with-your-required-content"><span class="header-section-number">5.14.2</span> Replacing the entire title page with your required content</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/ulyngs/oxforddown/blob/master/05-extensions.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/ulyngs/oxforddown/edit/master/05-extensions.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong><p><code>oxforddown</code>:<br>
An Oxford University Thesis<br>
Template for R Markdown</p></strong>" was written by Author Name. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
